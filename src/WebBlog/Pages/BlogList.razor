@page "/"

@inject BlogService BlogService

@if (blogs == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <Tag></Tag>
    <Virtualize Items="@blogs" Context="post">
        <ItemContent>
            @if (post.Published_At.HasValue)
            {
                <div>
                    <h4><a href="/posts/@post.Slug">@post.Title</a></h4>
                    <p>
                        <small>@post.Published_At.Value.ToString("dd MMMM yyyy", CultureInfo.CurrentCulture)</small>
                        &nbsp;@post.Description
                    </p>
                </div>
            }
        </ItemContent>
        <Placeholder>
            <div>
                <h4>Loading&hellip;</h4>
            </div>
        </Placeholder>
    </Virtualize>

}

@code {
    private List<BlogPosts> blogs;

    protected override async Task OnInitializedAsync()
    {
        blogs = await BlogService.GetBlogsAsync();
    }
}