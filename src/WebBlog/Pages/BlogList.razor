@page "/"
@using System.Globalization
@using WebBlog.Data
@using WebBlog.Shared
@inject BlogService BlogService

@if (blogs == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <Tag></Tag>
    <Virtualize Items="@blogs" Context="post">
        <ItemContent>
            <div>
                <h4><a href="/posts/@post.Slug">@post.Title</a></h4>
                <p><span>@post.Published_At.ToString("dd MMMM yyyy", CultureInfo.CurrentCulture)</span>&nbsp;@post.Description</p>
            </div>
        </ItemContent>
        <Placeholder>
            <div>
                <h4>Loading&hellip;</h4>
            </div>
        </Placeholder>
    </Virtualize>

}

@code {
    private List<BlogPosts> blogs;

    protected override async Task OnInitializedAsync()
    {
        blogs = await BlogService.GetBlogsAsync();
    }
}